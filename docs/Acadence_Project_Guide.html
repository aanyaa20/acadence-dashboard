<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Acadence — Project Guide</title>
  <style>
    :root{ --fg:#0f172a; --muted:#334155; --accent:#2563eb; }
    *{ box-sizing:border-box }
    body{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; color:var(--fg); line-height:1.5 }
    .wrap{ max-width:980px; margin:40px auto; padding:0 20px }
    h1{ font-size:28px; margin:0 0 8px }
    h2{ font-size:22px; margin:28px 0 8px; border-bottom:1px solid #e5e7eb; padding-bottom:6px }
    h3{ font-size:18px; margin:18px 0 6px }
    p{ margin:8px 0 }
    code, pre{ background:#f8fafc; border:1px solid #e5e7eb; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace }
    code{ padding:2px 5px }
    pre{ padding:12px; overflow:auto }
    ul{ margin:8px 0 8px 20px }
    .note{ color:var(--muted) }
    .accent{ color:var(--accent); font-weight:600 }
    .kbd{ border:1px solid #cbd5e1; border-bottom-width:2px; padding:2px 6px; border-radius:6px; font-family: ui-monospace, monospace; background:#fff }
    .header{ display:flex; align-items:baseline; gap:10px }
    @media print{ .wrap{ margin:0; } a[href]:after{ content:"" } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <h1>Acadence — End‑to‑End Project Guide</h1>
      <span class="note">Presenter Notes</span>
    </div>

    <h2>1) Product Overview</h2>
    <ul>
      <li><b>What it is:</b> Learning dashboard with AI‑generated courses, lessons, quizzes, points and streaks, plus a helpful chatbot.</li>
      <li><b>Features:</b> AI course gen + quick fallback, lesson tracking, quizzes, streaks, recommendations, JWT‑protected APIs.</li>
    </ul>

    <h2>2) Architecture</h2>
    <ul>
      <li><b>Frontend:</b> React + Vite (Dashboard, Courses, Lessons, Quiz, Auth, Chatbot).</li>
      <li><b>Backend:</b> Node + Express, MongoDB via Mongoose.</li>
      <li><b>DB:</b> MongoDB Atlas — collections: users, courses, lessons, quizzes.</li>
      <li><b>AI:</b> Gemini 2.5‑flash — structured generation + chatbot model.</li>
    </ul>

    <h2>3) Data Model</h2>
    <ul>
      <li><b>User:</b> email, password(hash), name, theme, totalPoints, streak fields, activityLog[{date, lessonsCompleted}]</li>
      <li><b>Course:</b> userId, title, topic, difficulty, description, estimatedDuration, learningObjectives[], totalLessons, completedLessons</li>
      <li><b>Lesson:</b> courseId, title, content, order, points, duration, videoSearchTerm, completed, completedBy[]</li>
      <li><b>Quiz:</b> courseId, title, description, questions[{ques, options[], correctAnswer, explanation}], attempts[]</li>
    </ul>

    <h2>4) Auth</h2>
    <ul>
      <li><b>Register/Login:</b> bcrypt password hashing; returns JWT.</li>
      <li><b>Middleware:</b> verifies JWT, sets <code>req.user.userId</code>, protects routes.</li>
      <li><b>Security:</b> quiz GET omits correct answers; only submit checks them.</li>
    </ul>

    <h2>5) AI Course Generation</h2>
    <ul>
      <li><b>Endpoint:</b> <code>POST /api/generate-course</code> (protected).</li>
      <li><b>Prompt:</b> strict JSON; 200–300 word lessons; 3–5 quiz Qs.</li>
      <li><b>Resilience:</b> 3 retries on overload; cleans response; balanced‑brace JSON extraction; multi‑attempt parsing.</li>
      <li><b>Persistence:</b> creates Course → Lessons → Quiz.</li>
      <li><b>Fallback:</b> <code>POST /api/generate-course/quick</code> template generation (instant).</li>
    </ul>

    <h2>6) Points & Streaks</h2>
    <h3>Lesson Completion</h3>
    <ul>
      <li>+5 points on first completion; increments course.completedLessons.</li>
      <li>First activity of the day updates streak; same‑day repeats do not.</li>
    </ul>
    <pre>if firstActivityToday:
  currentStreak = (yesterdayActive ? currentStreak+1 : 1)
  longestStreak = max(longestStreak, currentStreak)
  lastActivityDate = today</pre>
    <h3>Quiz Submission</h3>
    <ul>
      <li>Scores answers, saves attempt; +20 points on first completion.</li>
      <li>If first activity today, streak logic runs (quiz marks activity).</li>
    </ul>

    <h2>7) Chatbot & Recommendations</h2>
    <ul>
      <li><b>Chatbot:</b> <code>POST /api/chat</code> with user and course context + short history.</li>
      <li><b>Recommendations:</b> <code>GET /api/recommendations/:userId</code> asks Gemini for 3 next courses; strict JSON + safe fallback.</li>
    </ul>

    <h2>8) Demo Script (3–5 min)</h2>
    <ol>
      <li>Login → JWT secured</li>
      <li>Generate Quick course → open course</li>
      <li>Complete a lesson → +5 points; explain streak</li>
      <li>Take quiz → +20 points</li>
      <li>Dashboard shows points + streak</li>
      <li>Ask chatbot a course question</li>
      <li>Atlas → Browse Collections → show updated docs</li>
    </ol>

    <h2>9) Atlas Tips</h2>
    <ul>
      <li>Click <span class="accent">Browse Collections</span> in the cluster view.</li>
      <li>If empty: Security → Network Access → Add Current IP → wait 1–2 min → refresh.</li>
    </ul>

    <p class="note">Print to PDF: Press <span class="kbd">Ctrl</span> + <span class="kbd">P</span> → Save as PDF.</p>
  </div>
</body>
</html>